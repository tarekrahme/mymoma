<% logos = ["ğŸ’°", "ğŸ’³", "ğŸ’¸", "ğŸ’¶", "ğŸ§", "ğŸ’²"] %>

<div class="">
  <h6 style="margin-left: 24px; margin-bottom: 0px; opacity: 0.3;"><% d = Date.today %>
    <%= d.strftime("%A, %b %d")%>
  </h6>
  <div class="d-flex align-items-center justify-content-between mx-4 pb-2" style="border-bottom: 1px solid lightgrey;">
    <h4 class="font-weight-bold" style="margin-bottom: 10px; opacity: 0.6;">Transactions</h4>
    <%= link_to "+", new_transaction_path, class:"blue-font", style:"font-size:30px; margin-bottom: 10px;" %>

  </div>
  <div class="transactions-box w-100">

    <h5 class="my-4 text-center" style="opacity:0.6;">Today</h5>
    <% @transactions.each do |transaction| %>
      <%= link_to transaction_path(transaction) do %>
        <div class="flex-and-between ml-2">
                  <div class="merchant-info flex-and-between">
                    <% case transaction.merchant %>
                      <% when "Bakery" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ¥</p>
                      <% when "Eat" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸŒ</p>
                      <% when "Pharmacy" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ’Š</p>
                      <% when "Pret" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ¥—</p>
                      <% when "Book" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ“š</p>
                      <% when "Water" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ’¦</p>
                      <% when "Plant" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸŒ±</p>
                      <% when "Tesco" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ¥¦</p>
                      <% else %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ”‘</p>
                    <% end %>
                    <div>
                      <p class="font-weight-bold no-bottom-margin" style="color:black; opacity: 0.6;"><%= transaction.merchant %></p>
                      <p style="color:black; opacity: 0.3;"><%= transaction.day.date.strftime("%A, %b %d") %></p>
                    </div>
                  </div>
                  <h5 class="red-font mr-3">-Â£<%= transaction.amount_cents / 100.0 %></h5>
                </div>
      <% end %>
    <% end %>
  </div>
  <% if @transactions_yesterday %>
  <h5 class="my-4 text-center" style="opacity: 0.6;"> <%=  (Date.today-1).strftime('%a %d %b')%></h5>
  <div class="transactions-box w-100">
    <% @transactions_yesterday.each do |transaction| %>
      <%= link_to transaction_path(transaction) do %>
        <div class="flex-and-between ml-2">
                  <div class="merchant-info flex-and-between">
                    <% case transaction.merchant %>
                      <% when "Bakery" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ¥</p>
                      <% when "Eat" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸŒ</p>
                      <% when "Pharmacy" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ’Š</p>
                      <% when "Pret" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ¥—</p>
                      <% when "Book" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ“š</p>
                      <% when "Water" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ’¦</p>
                      <% when "Plant" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸŒ±</p>
                      <% when "Tesco" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ¥¦</p>
                      <% else %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ”‘</p>
                    <% end %>
                    <div>
                      <p class="font-weight-bold no-bottom-margin" style="color:black; opacity: 0.6;"><%= transaction.merchant %></p>
                      <h6 style="color:black; opacity: 0.3;">
                        <% if time_ago_in_words(transaction.day.date) == "1 day" %>
                          <p>Yesterday</p>

                        <% else %>
                          <p><%= time_ago_in_words(transaction.day.date) %> ago</p>
                        <% end %>
                      </h6>
                    </div>
                  </div>
                  <h5 class="red-font mr-3">-Â£<%= transaction.amount_cents / 100.0 %></h5>
                </div>
      <% end %>
    <% end %>
  </div>
    <% end %>
      <% if @transactions_2days %>
  <h5 class="my-4 text-center" style="opacity: 0.6;"><%= (Date.today-2).strftime('%a %d %b') %></h5>
  <div class="transactions-box w-100">
    <% @transactions_2days.each do |transaction| %>
      <%= link_to transaction_path(transaction) do %>
        <div class="flex-and-between ml-2">
                  <div class="merchant-info flex-and-between">
                    <% case transaction.merchant %>
                      <% when "Bakery" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ¥</p>
                      <% when "Eat" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸŒ</p>
                      <% when "Pharmacy" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ’Š</p>
                      <% when "Pret" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ¥—</p>
                      <% when "Book" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ“š</p>
                      <% when "Water" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ’¦</p>
                      <% when "Plant" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸŒ±</p>
                      <% when "Tesco" %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ¥¦</p>
                        <% else %>
                        <p style="text-align: center; font-size: 30px; margin: 0 5px">ğŸ”‘</p>
                    <% end %>
                    <div>
                      <p class="font-weight-bold no-bottom-margin" style="color:black; opacity: 0.6;"><%= transaction.merchant %></p>
                      <h6 style="color:black; opacity: 0.3;">
                      <% if time_ago_in_words(transaction.day.date) == "1 day" %>
                          <p>Yesterday</p>

                        <% else %>
                          <p><%= time_ago_in_words(transaction.day.date) %> ago</p>
                        <% end %>
                      </h6>
                    </div>
                  </div>
                  <h5 class="red-font mr-3">-Â£<%= transaction.amount_cents / 100.0 %></h5>
                </div>
      <% end %>
    <% end %>
  </div>
    <% end %>
</div>

